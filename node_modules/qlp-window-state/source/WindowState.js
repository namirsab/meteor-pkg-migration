import $ from 'jquery';
import { importFromMeteorPackage } from './importFromMeteor.js';
const ReactiveVar = importFromMeteorPackage('reactive-var', 'ReactiveVar');
const height = new ReactiveVar(window.outerHeight);
const width = new ReactiveVar(window.outerWidth);
const $window = $(window);

$(document).ready(function () {
    $window.resize(function () {
        height.set(window.outerHeight);
        width.set(window.outerWidth);
    });
});

const WindowState = {
    isMaximized() {
        const currentHeight = height.get();
        const currentWidth = width.get();
        const availHeight = screen.availHeight * 0.9;
        const availWidth = screen.availWidth * 0.9;

        return !(currentHeight < availHeight || currentWidth < availWidth);
    },

    height: () => height.get(),
    width: () => width.get()
};

const Template = importFromMeteorPackage('templating', 'Template');

Template.registerHelper('windowIsMaximized', function() {
    return WindowState.isMaximized();
});

module.exports = {
    WindowState
}

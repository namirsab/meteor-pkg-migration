'use strict';

var _jquery = require('jquery');

var _jquery2 = _interopRequireDefault(_jquery);

var _importFromMeteor = require('./importFromMeteor.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ReactiveVar = (0, _importFromMeteor.importFromMeteorPackage)('reactive-var', 'ReactiveVar');
var _height = new ReactiveVar(window.outerHeight);
var _width = new ReactiveVar(window.outerWidth);
var $window = (0, _jquery2.default)(window);

(0, _jquery2.default)(document).ready(function () {
    $window.resize(function () {
        _height.set(window.outerHeight);
        _width.set(window.outerWidth);
    });
});

var WindowState = {
    isMaximized: function isMaximized() {
        var currentHeight = _height.get();
        var currentWidth = _width.get();
        var availHeight = screen.availHeight * 0.9;
        var availWidth = screen.availWidth * 0.9;

        return !(currentHeight < availHeight || currentWidth < availWidth);
    },


    height: function height() {
        return _height.get();
    },
    width: function width() {
        return _width.get();
    }
};

var Template = (0, _importFromMeteor.importFromMeteorPackage)('templating', 'Template');

Template.registerHelper('windowIsMaximized', function () {
    return WindowState.isMaximized();
});

module.exports = {
    WindowState: WindowState
};